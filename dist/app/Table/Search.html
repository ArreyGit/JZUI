<!DOCTYPE html>
<html lang="en">
  <head>
    <title>index</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<!-- Core -->
<link href="../../../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Menu -->
<link href="../../../src/js/lib/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

<!-- DataTables -->
<link href="../../../src/js/lib/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">
<link href="../../../src/js/lib/datatables-responsive/css/dataTables.responsive.css" rel="stylesheet">

<!-- Custom -->
<link href="../../../src/css/common/sb-admin-2.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../../node_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<script src="../../../node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
<script src="../../../node_modules/vue/dist/vue.js" type="text/javascript"></script>
<script src="../../../node_modules/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/metisMenu/dist/metisMenu.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/datatables/media/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/datatables-responsive/js/dataTables.responsive.js" type="text/javascript"></script>
<script src="../../../src/js/lib/tools/validate/jquery.validate.min.js"></script>
<script src="../../../src/js/lib/tools/validate/additional-methods.js"></script>
<script src="../../../src/js/lib/tools/validate/messages_zh.js"></script>
<script src="../../../src/js/lib/tools/validate/validate-methods.js"></script>
<script src="../../../src/js/lib/sb-admin-2.js"></script> 
<script src="../../../src/js/lib/tools/WdatePicker/WdatePicker.js"></script>
<style>

	body{margin:0px;font-size:12px;}
	.nav>li>a{padding:5px 10px;}
	.table{margin-bottom:5px;}
	.panel-heading{padding:5px 8px;}
	.label{font-weight:normal;font-family:microsoft yahei;}
	
	#page-wrapper{border:0;margin:0;padding:10px;}

	.form-inline .form-group{margin-bottom:10px;margin-right:5px;}
	.form-inline .form-group .form-control{	padding: 0px 4px;height: 30px;}
	.form-inline .form-group label{min-width:80px;text-align:right;}
	
	.pagination {margin: 5px 0px;}

	.nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover{font-weight:bold;}
	.m5{margin:10px 5px;}
	label.form-require-error{color: #F42D2D;line-height: 2;}
	
	table.table-bordered thead th, table.table-bordered thead td{    white-space: nowrap;}
	.table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th
	{padding:8px 5px;}
	.panel-body{padding:10px;}
	.pagination li{display:block;    box-sizing: initial;} 
</style>
<script>var Ctx = ctx = '';</script> 
<script src="../../../dist/js/app/common/common.js"></script>
  </head>
  <body>
 	<ul class="nav nav-tabs">
	<li><a href="../Table/Table.html">JZ.Table</a></li>
	<li><a href="../Vue/index.html">JZ.Vue</a></li>
	<li><a href="../Table/TableSelects.html">JZ.Vue TableSelects</a></li>
	<li><a href="../Table/Search.html">JZ.Vue TableSearch</a></li>
	<li><a href="../Table/Tabs.html">JZ.Vue TableTabs</a></li>
	<li><a href="../Form/index.html">JZ.Form</a></li>
    <!--<li><a href="/dist/app/home/index.html">Bootstrap</a></li>-->
</ul>
<div id="page-wrapper">


		<h6>Bootstrap Demo</h6>
		<h5>演示： 
	<br>1.搜索
	<br>2.数据对象传递(列表页->详情页)
	</h5>
	<!-- form 筛选条件-->
	<form class="row j_filter" id="j_filter_1">
	  <div class="col-sm-12">  
	    <div class="panel panel-default">
	        <div class="panel-body form-inline">
				  <div class="form-group"><label>标题：</label><input type="text" name="name" class="form-control" placeholder=""/></div>
				  
				  <div class="form-group"><label>描述：</label><input type="text" name="title" class="form-control" placeholder=""/></div>
				  
				  <div class="form-group"><label>状态：</label>
                <select class="form-control" name="isvalid">
                   <option value="0">请选择</option>
                   <option value="0">禁用</option>
                   <option value="1">启用</option>
               </select>
          </div>
				  
			
				  <div class="form-group"><label>提交时间：</label>
				  <input class="Wdate-no-border form-control" readonly="readonly" id="filter_1_date1" name="startSubmitTime" onclick="WdatePicker({ minDate:'#F{$dp.$D(\'filter_1_date2\',{d:-31});}',maxDate:'#F{$dp.$D(\'filter_1_date2\',{d:0});}'})" />
				  -
				  <input class="Wdate-no-border form-control" readonly="readonly" id="filter_1_date2" name="endSubmitTime" onclick="WdatePicker({minDate:'#F{$dp.$D(\'filter_1_date1\',{d:0});}',maxDate:'#F{$dp.$D(\'filter_1_date1\',{d:31});}'})" />
				  </div>
				  <div class="form-group"><button type="button" onclick='fun_search()' class="btn btn-primary btn-sm">查询</button></div>
			  </div>			  
		  </div>
	  </div>
	</form>
	<div class="row"> 
	    <div class="col-lg-12">
	        <div class="panel panel-default">
	            <div class="panel-body">
	                 <div id="p1" class="tab-pane fade in active">
	                     	<br>
			  	        	  <div class="table-responsive">
			                     <table width="100%" class="table table-striped table-bordered table-hover" id="vue-table1">
			                      <thead>
			                          <tr>
			                           <th>序号</th>
			                           <th style="min-width: 80px;">操作</th>
			                          <th>标题</th>
			                          <th>描述</th>
			                          <th>状态</th>
			                          <th>提交时间</th>
			                          </tr>
			                      </thead>
			                      <tbody>
		                      		<!-- 节点遍历 -->
														<tr v-for="item in items">
															<td>{{item.vueIndex}}</td>
															<td>
																<button type="button" class="btn btn-warning btn-xs">无</button>
																<button type="button" class="btn btn-primary btn-xs" v-on:click="detail(item,$event)">打开</button>
															</td>
															<td>{{ item.name }}</td>
															<td>{{ item.title }}</td>
															<td>{{ false | switch_1 }}</td>
															<td>{{ false | table_1_timefomart}}</td>
														</tr>
													</tbody>
			                  </table>
		                    </div>
		                    <ul id="vue-pager1" class="pagination pull-right"></ul>
	                     </div>
	        </div>
	    </div>
	</div>
</div>
<div class="modal fade" id="modal_table1_detail" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	  <div class="modal-dialog modal-lg" role="document">
	    <div class="modal-content">
		    <form id="form_user_info"  method="post">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">1.传递对象各个字段信息；2.通过ajax展示一个子列表</h4>
		      </div>
			      <div class="modal-body">
			      		  <div id="vue-table1-info">
			      		  <div class="form-group">标题：{{item.name}}</div>
			      		  <div class="form-group">描述：{{item.title}}</div>
			      		  </div> 
			      		  <div class="table-responsive">
				                     <table width="100%" class="table table-striped table-bordered table-hover" id="vue-table1-table1">
				                      <thead>
				                          <tr>
				                           <th>序号</th>
				                           <th>操作</th>
				                           <th>标题</th>
				                           <th>描述</th>
				                           <th>状态</th>
				                           <th>时间</th>
				                          </tr>
				                      </thead>
				                      <tbody>
			                      		<!-- 节点遍历 -->
										<tr v-for="item in items">
											<td>{{item.vueIndex}}</td>
											<td>
												<button type="button" class="btn btn-warning btn-xs">无</button>
											</td>
											<td>{{ item.name }}</td>
											<td>{{ item.title }}</td>
											<td>{{ false | switch_1 }}</td>
											<td>{{ false | table_1_timefomart}}</td>
										</tr>
									</tbody>
				                  </table>
			                    </div>
			                    <ul id="vue-table1-pager3" class="pagination pull-right"></ul>
								<p class="text-center">提交后将不能进行修改</p>
			      </div>
		      <div class="modal-footer"> 
		        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
		        <button type="submit" class="btn btn-primary">提交</button>
		      </div>
		    </form>
	    </div>
	  </div>
	</div>

	</div>
<script type="text/javascript">
function getLocalTime(tm) {
		if("" == tm || undefined == tm){
			return "";
		}
	    var now=new Date(tm);
	    var year=now.getFullYear();     
	    var month=now.getMonth()+1;     
	    var date=now.getDate();     
	    var hour=now.getHours();     
	    var minute=now.getMinutes();     
	    var second=now.getSeconds();     
	    return year+"-"+month+"-"+date+"  "+hour+":"+minute+":"+second;
	}  
	//保存各个对象
	var page = {
			table1:null,url1:JZ.AjaxUrl.DemoPageData,//'/mock/DemoPageData.json?'+Math.random(),
			table1_table1:null,table1_url1:JZ.AjaxUrl.DemoPageData,//'/mock/DemoPageData.json?'+Math.random(), 
		};
	fun_search();
	//搜索
	function fun_search(){
		//拼接请求参数
		var params = '&'+$('#j_filter_1').serialize();
		//设置特殊参数
		params += '&changeMethod=0&isReceivables=0';
		//如果表格未初始化
		if(page['table1']==null){
			window['init_table_1'](page['url1'] + params);
			return;
		}else{
			//修改表格请求地址
			page['table1'].setUrl(page['url1'] + params);
			//重新加载数据
			page['table1'].reload();	
		}
	} 
	function init_table_1(url){
		console.log(url);
		page.table1 = JZ.Table({ 
			url:url,
			el_data:'#vue-table1',
			el_pager:'#vue-pager1', 
			pageNum:2, 
			//limit:10,//每页条数
			//page:true//是否分页
			filter:function(){//TODO:添加自定义逻辑
			Vue.filter('switch_1', function () {
				if(this.item.isvalid==0)
					return '禁用';
				return '启用';
			});
				Vue.filter('table_1_timefomart', function () {
					return getLocalTime(this.item.recorddate);
				});},
			methods:{
			  detail:function(item,event){
					$('#modal_table1_detail').modal('show');
					//1.加载主表信息
					vm_table1_detail.item = item;
					//2.加载子表信息
					var params = '&id='+item.id;
					var url = page.table1_url1 + params;
					if(page.table1_table1 == null){
						page.table1_table1 = JZ.Table({
							jsonp:true,
							url:url,
							el_data:'#vue-table1-table1',
							el_pager:'#vue-table1-pager1',
							limit:5, 
							filter:function(){},
							methods:{}
						});
					}else{
						page.table1_table1.setUrl(url);
						page.table1_table1.reload();	
					}
			  }
			}
		});
		//初始化弹窗详细信息
		vm_table1_detail = new Vue({
			el: '#vue-table1-info',
			data: {
				item:{}
			}
		});
	}
</script>
  </body>
</html>
