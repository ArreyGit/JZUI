<!DOCTYPE html>
<html lang="en">
  <head>
    <title>index</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<!-- Core -->
<link href="../../../src/local_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Menu -->
<link href="../../../src/js/lib/metisMenu/dist/metisMenu.min.css" rel="stylesheet">
 
<!-- DataTables -->
<link href="../../../src/js/lib/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">
<link href="../../../src/js/lib/datatables-responsive/css/dataTables.responsive.css" rel="stylesheet">

<!-- Custom -->
<link href="../../../src/css/common/sb-admin-2.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../../src/local_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"> 

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--> 
<script src="../../../src/local_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
<script src="../../../src/local_modules/vue/dist/vue.js" type="text/javascript"></script>
<script src="../../../src/local_modules/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/metisMenu/dist/metisMenu.min.js" type="text/javascript"></script>
<script src="../../../src/js/lib/tools/validate/jquery.validate.min.js"></script> 
<script src="../../../src/js/lib/tools/validate/additional-methods.js"></script>
<script src="../../../src/js/lib/tools/validate/messages_zh.js"></script>
<script src="../../../src/js/lib/tools/validate/validate-methods.js"></script>
<script src="../../../src/js/lib/sb-admin-2.js"></script> 
<script src="../../../src/js/lib/tools/WdatePicker/WdatePicker.js"></script>
<script src="../../../src/js/lib/tools/bootbox.js"></script> 
<link href="../../../src/js/utils/prettify/prettify.min.css" rel="stylesheet" type="text/css" />
 
<script src="../../../src/js/utils/prettify/prettify.js"></script>
<style>   

	body{margin:0px;font-size:12px;opacity:0;}
	.nav>li>a{padding:5px 5px;}
	.table{margin-bottom:5px;}
	.panel-heading{padding:5px 8px;}
	.label{font-weight:normal;font-family:microsoft yahei;}
	
	#page-wrapper{border:0;margin:0;padding:10px 15px;}

	.form-inline .form-group{margin-bottom:10px;margin-right:5px;}
	.form-inline .form-group .form-control{	padding: 0px 4px;height: 30px;}
	.form-inline .form-group label{min-width:80px;text-align:right;}
	
	.pagination {margin: 5px 0px;}

	.nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover{font-weight:bold;}
	.m5{margin:10px 5px;}
	label.form-require-error{color: #F42D2D;line-height: 2;}
	
	table.table-bordered thead th, table.table-bordered thead td{white-space: nowrap;}
	
	.table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th
	{padding:8px 5px;}
	.panel-body{padding:10px;}
	.pagination li{display:block;    box-sizing: initial;}
	[v-for],[v-if]{opacity:0}
	.rc-handle-container{position:relative;} 
	.rc-handle{position:absolute;width:7px;cursor:ew-resize;*cursor:pointer;margin-left:-3px;z-index:99;}
	
	table.table-bordered thead th, table.table-bordered tbody td{position:relative;
	}
	table.table-bordered thead th, table.table-bordered div.rc-div{
		
	}
	table.table-bordered div.rc-cells{
		opacity: 1;
		white-space: nowrap;
	    width: calc( 100% - 10px) ;
	    display: block;
	    position: absolute;
	    overflow: hidden;
	    top: 8px;
	    left: 5px;
	    z-index:1;
	}
	.table-resizable tbody{
		opacity:0;
	} 
	.table-resizable tbody tr:not(:nth-child(1)){
		opacity:0;
	}
	.table th[sort]{cursor:pointer;}
	.table th[sort]:hover{background-color: #f9f9f9;}
	.table th[sort] .glyphicon{    position: absolute;right: 2px;top: 10px;}
	
	.table th[sort] .glyphicon-sort{opacity:0;}
	[v-cloak]{display:none;}
</style>
<script>var Ctx = ctx = '';</script> 
<script src="../../../dist/js/app/JZ/JZ.js"></script>
  </head>
  <body>
	<div id="page-wrapper">
<a href="../examples/index.html" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-arrow-left"></span></a>


 	<a href="https://github.com/tlianglstyle/JZUI/blob/master/src/app/Table/TableSelects_Auto.html" class="btn btn-default btn-sm pull-right">查看源码</a>
 	<br><br>
		<div class="row">
		  <div class="col-sm-12">
		    <div class="panel panel-default">
		      <div class="panel-body">
		        <div class="table-responsive">
		          <form id="form_search"  method="post">
		          <table id="dg_detail" width="100%" class="table table-striped table-bordered table-hover" >
		            <tbody>
		            <tr>
		              <td style="width: 250px;">SKU: <input name="serachname" style="margin-left: 24px;"/></td>
		              <td>
		                <button type="button" onclick="search()" class="btn btn-primary btn-sm">查询</button>
		              </td>
		            </tr>
		            </tbody>
		          </table>
		          </form>
		        </div>
		      </div>
		    </div>
		  </div>
		</div>
		<div class="row">
		  <div class="col-sm-12">
		    <div class="panel panel-default">
		      <div class="panel-heading"><b>操作明细</b>
		      </div>
		      <div class="panel-body">
				<div class="form-group">
					<button type="button" class="btn btn-primary btn-sm" onclick='selectRow()'>确认选择</button>
				</div>
		        <div class="table-responsive">
		          <table width="100%" class="table table-striped table-bordered table-hover" id="vue-table1">
		            <thead>
		            <tr> 
		              <th><input type="checkbox"  v-model="UserList_CheckAll" />({{UserList_CheckCount}})</th>
		              <th>序号</th>
                  <th>操作</th>
                  <th>标题</th>
                  <th>描述</th>
                  <th>浏览</th>
                  <th>评论</th>
                  <th>分享</th>
                  <th>状态</th>
                  <th>提交时间</th>
		            </tr>
		            </thead>
		            <tbody>
		            <!-- 节点遍历 -->
		            <tr v-for="item in UserList">
		              <td>
		              <template v-if="item.id%2!=0">
		              	<input type="checkbox" :value="item.id" v-model="UserListSelects" />
		              </template>  
		              <template v-if="item.id%2==0">
		              	<input type="checkbox" :value="item.id" v-model="UserListSelects" disabled="disabled" title="不准选我" />
		              </template>  
		              </td>
		              <td>{{item.vueIndex}}</td>
		              <td>
		              </td>  
		              <td><a target="_blank" href="http://tliangl.com/article{{ item.id }}.aspx">{{ item.name }}</a></td>
									<td>{{ item.title }}</td>
									<td>{{ item.clicks }}</td>
									<td>{{ item.replys }}</td>
									<td>{{ item.shares }}</td>
									<td>{{ false | switch_1}}</td>
									<td>{{ item.recorddate }}</td>
		            </tr>
		            </tbody>
		          </table>
		        </div>
		        <ul id="vue-pager1" class="pagination pull-right"></ul>
		        <br> 
				<div class="form-group">
					<button type="button" class="btn btn-primary btn-sm" onclick='removeRow()'>移除</button>
				</div>
		        <div class="table-responsive">
		          <table width="100%" class="table table-striped table-bordered table-hover">
		            <thead>
		            <tr>
		              <th><input type="checkbox"  v-model="UserList2_CheckAll" />({{UserList2_CheckCount}})</th>
                  <th>序号</th>
                  <th>操作</th>
                  <th>标题</th>
                  <th>描述</th>
                  <th>浏览</th>
                  <th>评论</th>
                  <th>分享</th>
                  <th>状态</th>
                  <th>提交时间</th>
		            </tr>
		            </thead>
		            <tbody>
		            <!-- 节点遍历 -->
		            <tr v-for="item in UserList2">
		              <td><input type="checkbox" :value="item.id" v-model="UserListSelects2" /></td>
		              <td>{{item.vueIndex}}</td>
		              <td>
		              </td>
									<td><a target="_blank" href="http://tliangl.com/article{{ item.id }}.aspx">{{ item.name }}</a></td>
									<td>{{ item.title }}</td>
									<td>{{ item.clicks }}</td>
									<td>{{ item.replys }}</td>
									<td>{{ item.shares }}</td>
									<td>{{ false | switch_1}}</td>
									<td>{{ item.recorddate }}</td>
		            </tr>
		            </tbody>
		          </table>
		        </div>
		      </div>
		    </div>
		    </div>
		  </div>
	
	</div>
<script>
  JZ.onWindowLoad(function () {
        $('pre').addClass('prettyprint');
        prettyPrint(); 
  })
</script>
<script pre>
vm = new JZ.Vue({
	tables:{
		table1:{ 
	    data:'UserList',				//(必需)数据集合标识
			url:JZ.AjaxUrl.DemoPageData, //(必需)数据接口地址
	    dataCheckes:'UserListSelects',	//(多选)(必需)多选容器标识,用于存放选择的结果。如:vm.UserListSelects=[1,4,5]
	    dataCheckFilter2:function(item){	//(多选)(可选)判断是否允许选中
	    	if(item.id%2!=0)	//设置条件选中
	    		return true;
	    	return false;  
	    },
	    dataCheckesCallBack:function(checks){
	    	console.log(checks);
	    	if(checks.length>0){
	    		selectRow();
	    	}
	    },
	    key:'id',					//(多选功能必需的参数)数据表中的主键列名(或唯一标识列)
			el_pager:'#vue-pager1',	//(分页功能必需的参数)分页容器 
	    limit:8								//(分页功能可选的参数)每页条数,默认10
	  }
	},
	data: {
		UserList2:[],//选择的结果集  Array Object
		UserListSelects2:[]//结果集中再次选择的结果集 Array String
  },
	filter:function(){
		Vue.filter('switch_1', function () {
			if(this.item.isvalid==0)
				return '禁用';
			return '启用';
		});
	},
	computed:{//表格2全选
		UserList2_CheckAll:{
			  get: function() {
			        return this['UserList2_CheckCount'] == this['UserList2'].length;
		      },
		      set: function(value) {
		    	  this['UserListSelects2'] = value
		    	  	?this['UserListSelects2'].mergeArray(this['UserList2'].getKeys('id'))
		    		:this['UserListSelects2'].removeByValues(this['UserList2'].getKeys('id'));
		      }
		},
		UserList2_CheckCount:{
			 get: function() {
			        return this['UserListSelects2'].length;
			 } 
		}
	},
	methods:{}
});

function selectRow(){
	var results=[];
	for ( i in vm.UserList){
		var o = vm.UserList[i];
		if(	
			vm.UserListSelects.indexOf(o.id+'')>=0 && 
			vm.UserList2.getKeys('id').indexOf(o.id)<0		
		){
			vm.UserList2.push(o);
		}
	}
}
function removeRow(){
	vm.UserListSelects = vm.UserListSelects.removeByValues(vm.UserListSelects2);
	vm.UserList2 = vm.UserList2.removeByKeys('id',vm.UserListSelects2);
	vm.UserListSelects2=[];
}
function search(){
	table1.setUrl(JZ.AjaxUrl.DemoPageData);
	table1.reload();
}
</script>
  </body>
</html>
